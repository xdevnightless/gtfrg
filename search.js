document.getElementById("searchform").addEventListener("submit", async function(event) { event.preventDefault(); try { await registerSW(); // Calls service worker registration const searchbar = document.getElementById("searchbar"); const url = search(searchbar.value, "https://www.google.com/search?q=%s"); window.location.href = __uv$config.prefix + __uv$config.encodeUrl(url); } catch (err) { alert(err.toString()); } }); /** * @param {string} input * @param {string} template Template for a search query. * @returns {string} Fully qualified URL */ function search(input, template) { try { return new URL(input).toString(); } catch (err) { try { const url = new URL(`http://${input}`); if (url.hostname.includes(".")) return url.toString(); } catch (err) {} } return template.replace("%s", encodeURIComponent(input));
